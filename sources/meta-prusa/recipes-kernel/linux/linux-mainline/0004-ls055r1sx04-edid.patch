From 0cb807c3b5c6efc277f90dc4ed5affc410311d55 Mon Sep 17 00:00:00 2001
From: Filip Kotoucek <filip.kotoucek@prusa3d.cz>
Date: Wed, 21 Nov 2018 11:56:18 +0100
Subject: [PATCH 2/3] drm: hardcoded EDID for 2k disp to avoid dependency on
 rootfs

---
 drivers/gpu/drm/drm_edid_load.c | 21 +++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/drm_edid_load.c b/drivers/gpu/drm/drm_edid_load.c
index 37d8ba3ddb46..1ad9c017838d 100644
--- a/drivers/gpu/drm/drm_edid_load.c
+++ b/drivers/gpu/drm/drm_edid_load.c
@@ -38,14 +38,15 @@ int __drm_get_edid_firmware_path(char *buf, size_t bufsize)
 }
 EXPORT_SYMBOL(__drm_get_edid_firmware_path);
 
-#define GENERIC_EDIDS 6
+#define GENERIC_EDIDS 7
 static const char * const generic_edid_name[GENERIC_EDIDS] = {
 	"edid/800x600.bin",
 	"edid/1024x768.bin",
 	"edid/1280x1024.bin",
 	"edid/1600x1200.bin",
 	"edid/1680x1050.bin",
 	"edid/1920x1080.bin",
+	"edid/ls055r1sx04_148.5mhz.bin",
 };
 
 static const u8 generic_edid[GENERIC_EDIDS][128] = {
@@ -157,6 +158,24 @@ static const u8 generic_edid[GENERIC_EDIDS][128] = {
 	0x00, 0x4c, 0x69, 0x6e, 0x75, 0x78, 0x20, 0x46,
 	0x48, 0x44, 0x0a, 0x20, 0x20, 0x20, 0x00, 0x05,
 	},
+	{
+	0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00,
+	0x52, 0x62, 0x88, 0x88, 0x00, 0x88, 0x88, 0x88,
+	0x1c, 0x15, 0x01, 0x03, 0x81, 0x00, 0x00, 0x78,
+	0x0a, 0xda, 0xff, 0xa3, 0x58, 0x4a, 0xa2, 0x29,
+	0x17, 0x49, 0x4b, 0x00, 0x00, 0x00, 0x01, 0x01,
+	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
+	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x02, 0x3a,
+	0xa0, 0xa6, 0x50, 0x00, 0x08, 0xa0, 0x64, 0x0a,
+	0x31, 0x00, 0x44, 0x7a, 0x00, 0x00, 0x00, 0x1e,
+	0x00, 0x00, 0x00, 0xfe, 0x00, 0x57, 0x48, 0x59,
+	0x20, 0x54, 0x48, 0x49, 0x53, 0x20, 0x53, 0x48,
+	0x49, 0x54, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x57,
+	0x48, 0x59, 0x3f, 0x0a, 0x00, 0x00, 0x00, 0x00,
+	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfd,
+	0x00, 0x17, 0x46, 0x0f, 0xa0, 0x1e, 0x00, 0x0a,
+	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x05,
+	},
 };
 
 static int edid_size(const u8 *edid, int data_size)
-- 
2.26.0
