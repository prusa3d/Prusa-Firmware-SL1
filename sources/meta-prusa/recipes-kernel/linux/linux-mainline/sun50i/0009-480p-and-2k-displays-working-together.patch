From 814011476fc1ddc132b01ce5ed71ad98063dd49b Mon Sep 17 00:00:00 2001
From: Filip Kotoucek <filip.kotoucek@prusa3d.cz>
Date: Wed, 21 Nov 2018 11:56:18 +0100
Subject: [PATCH] drm: hardcoded EDID for 2k disp to avoid dependency on rootfs

---
 drivers/gpu/drm/drm_edid_load.c               |  22 ++-
 1 file changed, 21 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/drm_edid_load.c b/drivers/gpu/drm/drm_edid_load.c
index d38b3b255926..f0132ba6a556 100644
--- a/drivers/gpu/drm/drm_edid_load.c
+++ b/drivers/gpu/drm/drm_edid_load.c
@@ -38,14 +38,16 @@ int __drm_get_edid_firmware_path(char *buf, size_t bufsize)
 }
 EXPORT_SYMBOL(__drm_get_edid_firmware_path);
 
-#define GENERIC_EDIDS 6
+#define GENERIC_EDIDS 7
 static const char * const generic_edid_name[GENERIC_EDIDS] = {
+
 	"edid/800x600.bin",
 	"edid/1024x768.bin",
 	"edid/1280x1024.bin",
 	"edid/1600x1200.bin",
 	"edid/1680x1050.bin",
 	"edid/1920x1080.bin",
+	"edid/ls055r1sx04_148.5mhz.bin",
 };
 
 static const u8 generic_edid[GENERIC_EDIDS][128] = {
@@ -157,6 +159,24 @@ static const u8 generic_edid[GENERIC_EDIDS][128] = {
 	0x00, 0x4c, 0x69, 0x6e, 0x75, 0x78, 0x20, 0x46,
 	0x48, 0x44, 0x0a, 0x20, 0x20, 0x20, 0x00, 0x05,
 	},
+	{
+	0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00,
+	0x52, 0x62, 0x88, 0x88, 0x00, 0x88, 0x88, 0x88,
+	0x1c, 0x15, 0x01, 0x03, 0x81, 0x00, 0x00, 0x78,
+	0x0a, 0xda, 0xff, 0xa3, 0x58, 0x4a, 0xa2, 0x29,
+	0x17, 0x49, 0x4b, 0x00, 0x00, 0x00, 0x01, 0x01,
+	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
+	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x02, 0x3a,
+	0xa0, 0x32, 0x50, 0x00, 0x08, 0xa0, 0x22, 0x06,
+	0x41, 0x00, 0x46, 0x7a, 0x00, 0x00, 0x00, 0x1e,
+	0x00, 0x00, 0x00, 0xfe, 0x00, 0x57, 0x48, 0x59,
+	0x20, 0x54, 0x48, 0x49, 0x53, 0x20, 0x53, 0x48,
+	0x49, 0x54, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x57,
+	0x48, 0x59, 0x3f, 0x0a, 0x00, 0x00, 0x00, 0x00,
+	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfd,
+	0x00, 0x17, 0x46, 0x0f, 0xa0, 0x1e, 0x00, 0x0a,
+	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0xad,
+	},
 };
 
 static int edid_size(const u8 *edid, int data_size)
-- 
2.24.1

From 6ba1651a69c9078aaf423049157368134e60eec2 Mon Sep 17 00:00:00 2001
From: Roman Beranek <roman.beranek@prusa3d.com>
Date: Mon, 1 Jul 2019 18:15:59 +0200
Subject: [PATCH] drm: EDID fix

---
 drivers/gpu/drm/drm_edid_load.c   | 14 +++++------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/drm_edid_load.c b/drivers/gpu/drm/drm_edid_load.c
index f0132ba6a556..a296c53f1056 100644
--- a/drivers/gpu/drm/drm_edid_load.c
+++ b/drivers/gpu/drm/drm_edid_load.c
@@ -161,21 +161,21 @@ static const u8 generic_edid[GENERIC_EDIDS][128] = {
 	},
 	{
 	0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00,
-	0x52, 0x62, 0x88, 0x88, 0x00, 0x88, 0x88, 0x88,
-	0x1c, 0x15, 0x01, 0x03, 0x81, 0x00, 0x00, 0x78,
+	0x52, 0x62, 0x88, 0x88, 0xa4, 0x01, 0x00, 0x00,
+	0x1c, 0x15, 0x01, 0x03, 0x81, 0x10, 0x09, 0x78,
 	0x0a, 0xda, 0xff, 0xa3, 0x58, 0x4a, 0xa2, 0x29,
 	0x17, 0x49, 0x4b, 0x00, 0x00, 0x00, 0x01, 0x01,
 	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
 	0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x02, 0x3a,
-	0xa0, 0x32, 0x50, 0x00, 0x08, 0xa0, 0x22, 0x06,
-	0x41, 0x00, 0x46, 0x7a, 0x00, 0x00, 0x00, 0x1e,
+	0xa0, 0xa6, 0x50, 0x00, 0x08, 0xa0, 0x64, 0x0a,
+	0x31, 0x00, 0x44, 0x7a, 0x00, 0x00, 0x00, 0x18,
 	0x00, 0x00, 0x00, 0xfe, 0x00, 0x57, 0x48, 0x59,
 	0x20, 0x54, 0x48, 0x49, 0x53, 0x20, 0x53, 0x48,
 	0x49, 0x54, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x57,
-	0x48, 0x59, 0x3f, 0x0a, 0x00, 0x00, 0x00, 0x00,
-	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfd,
+	0x48, 0x59, 0x3f, 0x0a, 0x20, 0x20, 0x20, 0x20,
+	0x20, 0x20, 0x20, 0x20, 0x00, 0x00, 0x00, 0xfd,
 	0x00, 0x17, 0x46, 0x0f, 0xa0, 0x1e, 0x00, 0x0a,
-	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0xad,
+	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0xe5,
 	},
 };
 
-- 
2.24.1

